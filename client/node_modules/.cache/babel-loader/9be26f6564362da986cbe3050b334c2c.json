{"ast":null,"code":"import _toConsumableArray from\"/Users/wojtas/Desktop/Kodilla/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/wojtas/Desktop/Kodilla/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/wojtas/Desktop/Kodilla/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wojtas/Desktop/Kodilla/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import axios from'axios';import{API_URL}from'../config';/* selectors */export var getCart=function getCart(_ref){var cart=_ref.cart;return cart;};/* action name creator */var reducerName='cart';var createActionName=function createActionName(name){return\"app/\".concat(reducerName,\"/\").concat(name);};/* action types */var ADD_TO_CART=createActionName('ADD_TO_CART');var REMOVE_ONE=createActionName('REMOVE_ONE');var REMOVE_CART=createActionName('REMOVE_CART');var GET_CART_LOC_STOR=createActionName('GET_CART_LOC_STOR');/* action creators */export var addToCart=function addToCart(payload){return{payload:payload,type:ADD_TO_CART};};export var removeOneFromCart=function removeOneFromCart(payload){return{payload:payload,type:REMOVE_ONE};};export var removeCart=function removeCart(){return{type:REMOVE_CART};};export var getCartLocStor=function getCartLocStor(payload){return{payload:payload,type:GET_CART_LOC_STOR};};/* thunk creators */export var loadCartRequest=function loadCartRequest(){return(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var cart,emptyCart;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return JSON.parse(localStorage.getItem('cart'));case 3:cart=_context.sent;emptyCart=[];cart?dispatch(getCartLocStor(cart)):dispatch(getCartLocStor(emptyCart));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x){return _ref2.apply(this,arguments);};}());};export var sendOrderRequest=function sendOrderRequest(data){console.log('data to post: ',data);return(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios({method:'post',url:\"\".concat(API_URL,\"/orders\"),data:_objectSpread({},data)});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}());};/* reducer */export var reducer=function reducer(){var statePart=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};switch(action.type){case ADD_TO_CART:{var cart=_toConsumableArray(statePart);cart.push(action.payload);return cart;}case REMOVE_ONE:{var product=statePart.find(function(product){return product.id===action.payload;});var index=statePart.indexOf(product);statePart.splice(index,1);return statePart.length===0?[]:_toConsumableArray(statePart);}case REMOVE_CART:{var _cart=[];return _cart;}case GET_CART_LOC_STOR:{return action.payload;}default:return statePart;}};","map":{"version":3,"sources":["/Users/wojtas/Desktop/Kodilla/final-project/client/src/redux/cartRedux.js"],"names":["axios","API_URL","getCart","cart","reducerName","createActionName","name","ADD_TO_CART","REMOVE_ONE","REMOVE_CART","GET_CART_LOC_STOR","addToCart","payload","type","removeOneFromCart","removeCart","getCartLocStor","loadCartRequest","dispatch","JSON","parse","localStorage","getItem","emptyCart","console","log","sendOrderRequest","data","method","url","reducer","statePart","action","push","product","find","id","index","indexOf","splice","length"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { API_URL } from '../config';\n\n/* selectors */\nexport const getCart = ({cart}) => cart;\n\n/* action name creator */\nconst reducerName = 'cart';\nconst createActionName = name => `app/${reducerName}/${name}`;\n\n/* action types */\nconst ADD_TO_CART = createActionName('ADD_TO_CART');\nconst REMOVE_ONE = createActionName('REMOVE_ONE');\nconst REMOVE_CART = createActionName('REMOVE_CART');\nconst GET_CART_LOC_STOR = createActionName('GET_CART_LOC_STOR');\n\n/* action creators */\nexport const addToCart = payload => ({payload, type: ADD_TO_CART});\nexport const removeOneFromCart = payload => ({payload, type: REMOVE_ONE});\nexport const removeCart = () => ({type: REMOVE_CART});\nexport const getCartLocStor =  payload => ({payload, type: GET_CART_LOC_STOR});\n\n/* thunk creators */\n\nexport const loadCartRequest = () => {\n  return async dispatch => {\n\n    try {\n      let cart = await JSON.parse(localStorage.getItem('cart'));\n      const emptyCart = [];\n      cart ? dispatch(getCartLocStor(cart)) : dispatch(getCartLocStor(emptyCart));\n    } catch(e) {\n      console.log(e);\n    }\n  };\n};\n\nexport const sendOrderRequest = (data) => {\n  console.log('data to post: ', data);\n  return async dispatch => {\n    await axios({\n      method: 'post',\n      url: `${API_URL}/orders`,\n      data: {...data},\n    });\n  };\n};\n\n/* reducer */\nexport const reducer = (statePart = [], action = {}) => {\n\n  switch (action.type) {\n    case ADD_TO_CART: {\n      const cart = [...statePart];\n      cart.push(action.payload);\n      return cart;\n    } case REMOVE_ONE: {\n      const product = statePart.find(product => product.id === action.payload);\n      const index = statePart.indexOf(product);\n      statePart.splice(index, 1);\n      return statePart.length === 0 ? [] : [...statePart];\n    } case REMOVE_CART: {\n      const cart = [];\n      return cart;\n    } case GET_CART_LOC_STOR: {\n      return action.payload;\n    }\n    default:\n      return statePart;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/wojtas/Desktop/Kodilla/final-project/client/src/components/views/Cart/Cart.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { TextField } from '@material-ui/core';\nimport clsx from 'clsx';\nimport { connect } from 'react-redux';\nimport { getCart, addToCart, removeOneFromCart, removeCart, sendOrderRequest } from '../../../redux/cartRedux';\nimport { addOrder } from '../../../redux/ordersRedux';\nimport styles from './Cart.module.scss';\nimport { Typography } from '@material-ui/core';\n\nconst shortid = require('shortid');\n\nclass Cart extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      _id: shortid.generate(),\n      name: '',\n      phone: '',\n      email: '',\n      date: '',\n      products: this.props.cart,\n      totalPrice: this.setTotal(this.props.cart)\n    };\n\n    this.submitForm = e => {\n      e.preventDefault();\n      const order = this.state;\n      this.props.addOrder(order);\n      this.props.removeCart();\n      localStorage.setItem('cart', JSON.stringify([]));\n      this.props.sendOrder(order);\n      window.alert('Your order has been placed for processing');\n    };\n\n    this.removeFromLocal = id => {\n      const local = JSON.parse(localStorage.getItem('cart'));\n      const product = local.find(product => product.id === id);\n      const index = local.indexOf(product);\n      local.splice(index, 1);\n      localStorage.setItem('cart', JSON.stringify(local));\n    };\n  }\n\n  setTotal(products) {\n    let cost = null;\n    products.map(product => {\n      cost += product.totalCost;\n      return cost;\n    });\n    return cost;\n  }\n\n  componentDidMount() {\n    //set today date to state\n    const today = new Date();\n    this.setState({\n      date: today.getDate() + '.' + (1 + today.getMonth()) + '.' + today.getFullYear()\n    });\n  }\n\n  render() {\n    const cart = this.props.cart;\n\n    if (cart.length === 0) {\n      return React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Your cart is empty !\");\n    } else {\n      return React.createElement(\"div\", {\n        className: clsx(styles.root),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Cart:\"), React.createElement(\"div\", {\n        className: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(List, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, cart.map(product => React.createElement(ListItem, {\n        key: product.id,\n        button: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(ListItemAvatar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Avatar, {\n        srcSet: product.type === 'cake' ? require('../../../images/products/cakes/' + product.img) : require('../../../images/products/cupcakes/' + product.img),\n        variant: \"square\",\n        className: styles.avatar,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      })), React.createElement(ListItemText, {\n        primary: product.title,\n        secondary: React.createElement(React.Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          variant: \"body1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, 'price: $' + product.price), React.createElement(Typography, {\n          variant: \"body1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, 'amount: x' + product.amount), React.createElement(Typography, {\n          variant: \"body1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, 'total cost: $' + product.totalCost), product.wishes ? React.createElement(Typography, {\n          variant: \"body1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, 'wishes: ' + product.wishes) : ''),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), React.createElement(ListItemSecondaryAction, {\n        onClick: () => {\n          this.props.removeOneFromCart(product.id);\n          this.removeFromLocal(product.id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(IconButton, {\n        edge: \"end\",\n        \"aria-label\": \"delete\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(DeleteIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      })))))), React.createElement(\"div\", {\n        className: styles.totalContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Total cost: $\", this.state.totalPrice)), React.createElement(\"div\", {\n        className: styles.formContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: styles.form,\n        onSubmit: this.submitForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        onChange: event => {\n          this.setState({\n            name: event.target.value\n          });\n        },\n        className: styles.textField,\n        label: \"Type your name:\",\n        required: true,\n        autoComplete: \"off\",\n        fullWidth: true,\n        margin: \"dense\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        onChange: event => {\n          this.setState({\n            email: event.target.value\n          });\n        },\n        className: styles.textField,\n        label: \"Type your email:\",\n        required: true,\n        fullWidth: true,\n        type: \"email\",\n        margin: \"dense\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        onChange: event => {\n          this.setState({\n            phone: event.target.value\n          });\n        },\n        className: styles.textField,\n        label: \"Type your phone:\",\n        type: \"number\",\n        required: true,\n        fullWidth: true,\n        margin: \"dense\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Submit\")))));\n    }\n  }\n\n}\n\nCart.propTypes = {\n  cart: PropTypes.array,\n  removeOneFromCart: PropTypes.func,\n  removeCart: PropTypes.func,\n  addOrder: PropTypes.func,\n  loadCartRequest: PropTypes.func,\n  sendOrder: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  cart: getCart(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addToCart: data => dispatch(addToCart(data)),\n  removeOneFromCart: index => dispatch(removeOneFromCart(index)),\n  removeCart: () => dispatch(removeCart()),\n  addOrder: data => dispatch(addOrder(data)),\n  sendOrder: data => dispatch(sendOrderRequest(data))\n});\n\nconst Container = connect(mapStateToProps, mapDispatchToProps)(Cart);\nexport { // Component as Cart,\nContainer as Cart, Cart as CartComponent };","map":{"version":3,"sources":["/Users/wojtas/Desktop/Kodilla/final-project/client/src/components/views/Cart/Cart.js"],"names":["React","PropTypes","List","ListItem","ListItemAvatar","Avatar","ListItemSecondaryAction","ListItemText","IconButton","DeleteIcon","TextField","clsx","connect","getCart","addToCart","removeOneFromCart","removeCart","sendOrderRequest","addOrder","styles","Typography","shortid","require","Cart","Component","state","_id","generate","name","phone","email","date","products","props","cart","totalPrice","setTotal","submitForm","e","preventDefault","order","localStorage","setItem","JSON","stringify","sendOrder","window","alert","removeFromLocal","id","local","parse","getItem","product","find","index","indexOf","splice","cost","map","totalCost","componentDidMount","today","Date","setState","getDate","getMonth","getFullYear","render","length","root","container","type","img","avatar","title","price","amount","wishes","totalContainer","formContainer","form","event","target","value","textField","propTypes","array","func","loadCartRequest","mapStateToProps","mapDispatchToProps","dispatch","data","Container","CartComponent"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { TextField } from '@material-ui/core';\n\nimport clsx from 'clsx';\n\nimport { connect } from 'react-redux';\nimport { getCart, addToCart, removeOneFromCart, removeCart, sendOrderRequest } from '../../../redux/cartRedux';\nimport { addOrder } from '../../../redux/ordersRedux';\n\nimport styles from './Cart.module.scss';\nimport { Typography } from '@material-ui/core';\nconst shortid = require('shortid');\n\n\nclass Cart extends React.Component {\n  state = {\n    _id: shortid.generate(),\n    name: '',\n    phone: '',\n    email: '',\n    date: '',\n    products: this.props.cart,\n    totalPrice: this.setTotal(this.props.cart),\n  };\n\n\n  setTotal(products){\n    let cost = null;\n    products.map(product => {\n      cost += product.totalCost;\n      return cost;\n    });\n    return cost;\n  }\n\n  submitForm = (e) => {\n    e.preventDefault();\n    const order = this.state;\n    this.props.addOrder(order);\n    this.props.removeCart();\n    localStorage.setItem('cart', JSON.stringify([]));\n    this.props.sendOrder(order);\n    window.alert('Your order has been placed for processing');\n  }\n\n  componentDidMount(){\n    //set today date to state\n    const today = new Date();\n    this.setState({date: today.getDate() + '.' + (1 + today.getMonth()) + '.' + today.getFullYear()});\n  }\n\n  removeFromLocal = (id) => {\n    const local = JSON.parse(localStorage.getItem('cart'));\n    const product = local.find(product => product.id === id);\n    const index = local.indexOf(product);\n    local.splice(index, 1);\n    localStorage.setItem('cart', JSON.stringify(local));\n  }\n\n  render(){\n    const { cart } = this.props;\n    if(cart.length === 0){\n      return(\n        <h2>Your cart is empty !</h2>\n      );\n    } else {\n      return(\n        <div className={clsx(styles.root)}>\n          <h2>Cart:</h2>\n          <div className={styles.container}>\n            <List>\n              {cart.map(product => (\n                <ListItem key={product.id} button>\n                  <ListItemAvatar>\n                    <Avatar\n                      srcSet={product.type === 'cake' ? require('../../../images/products/cakes/' + product.img) : require('../../../images/products/cupcakes/' + product.img)}\n                      variant='square'\n                      className={styles.avatar}\n                    />\n                  </ListItemAvatar>\n                  <ListItemText\n                    primary={product.title}\n                    secondary={\n                      <React.Fragment>\n                        <Typography\n                          variant='body1'\n                        >\n                          {'price: $' + product.price}\n                        </Typography>\n                        <Typography\n                          variant='body1'\n                        >\n                          {'amount: x' + product.amount}\n                        </Typography>\n                        <Typography\n                          variant='body1'\n                        >\n                          {'total cost: $' + product.totalCost}\n                        </Typography>\n                        {product.wishes ? (\n                          <Typography\n                            variant='body1'\n                          >\n                            {'wishes: ' + product.wishes}\n                          </Typography>\n                        ) : ''}\n                      </React.Fragment>\n                    }\n                  />\n                  <ListItemSecondaryAction onClick={() => {\n                    this.props.removeOneFromCart(product.id);\n                    this.removeFromLocal(product.id);\n                  }}>\n                    <IconButton edge=\"end\" aria-label=\"delete\" >\n                      <DeleteIcon />\n                    </IconButton>\n                  </ListItemSecondaryAction>\n                </ListItem>\n              ))}\n            </List>\n            <div className={styles.totalContainer}>\n              <h2>Total cost: ${this.state.totalPrice}</h2>\n            </div>\n            <div className={styles.formContainer}>\n              <form className={styles.form} onSubmit={this.submitForm}>\n                <TextField\n                  onChange={(event) => {\n                    this.setState({name: event.target.value});\n                  }}\n                  className={styles.textField}\n                  label='Type your name:'\n                  required\n                  autoComplete=\"off\"\n                  fullWidth\n                  margin=\"dense\"\n                ></TextField>\n                <TextField\n                  onChange={(event) => {\n                    this.setState({email: event.target.value});\n                  }}\n                  className={styles.textField}\n                  label='Type your email:'\n                  required\n                  fullWidth\n                  type=\"email\"\n                  margin=\"dense\"\n                ></TextField>\n                <TextField\n                  onChange={(event) => {\n                    this.setState({phone: event.target.value});\n                  }}\n                  className={styles.textField}\n                  label='Type your phone:'\n                  type=\"number\"\n                  required\n                  fullWidth\n                  margin=\"dense\"\n                ></TextField>\n\n                <button\n                  type='submit'\n                >Submit</button>\n              </form>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nCart.propTypes = {\n  cart: PropTypes.array,\n  removeOneFromCart: PropTypes.func,\n  removeCart: PropTypes.func,\n  addOrder: PropTypes.func,\n  loadCartRequest: PropTypes.func,\n  sendOrder: PropTypes.func,\n};\n\nconst mapStateToProps = state => ({\n  cart: getCart(state),\n});\n\nconst mapDispatchToProps = dispatch => ({\n  addToCart: data => dispatch(addToCart(data)),\n  removeOneFromCart: index => dispatch(removeOneFromCart(index)),\n  removeCart: () => dispatch(removeCart()),\n  addOrder: (data) => dispatch(addOrder(data)),\n  sendOrder: (data) => dispatch(sendOrderRequest(data)),\n});\n\nconst Container = connect(mapStateToProps, mapDispatchToProps)(Cart);\n\nexport {\n  // Component as Cart,\n  Container as Cart,\n  Cart as CartComponent,\n};\n"]},"metadata":{},"sourceType":"module"}
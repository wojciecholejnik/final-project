{"ast":null,"code":"import _defineProperty from\"/Users/wojtas/Desktop/Kodilla/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/wojtas/Desktop/Kodilla/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wojtas/Desktop/Kodilla/final-project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import axios from'axios';import{API_URL}from'../config';/* selectors */export var getProductStats=function getProductStats(_ref){var products=_ref.products;return products.loading;};export var getCakes=function getCakes(_ref2){var products=_ref2.products;return products.products.cakes;};export var getCupcakes=function getCupcakes(_ref3){var products=_ref3.products;return products.products.cupcakes;};export var getOne=function getOne(_ref4){var products=_ref4.products,id=_ref4.id,type=_ref4.type;if(type==='cake'){return products.cakes.find(function(product){return product._id===id;});}else{return products.cupcakes.find(function(product){return product._id===id;});}};/* action name creator */var reducerName='posts';var createActionName=function createActionName(name){return\"app/\".concat(reducerName,\"/\").concat(name);};/* action types */var FETCH_START=createActionName('FETCH_START');var FETCH_SUCCESS=createActionName('FETCH_SUCCESS');var FETCH_ERROR=createActionName('FETCH_ERROR');var LOAD_PRODUCTS=createActionName('LOAD_PRODUCTS');/* action creators */export var fetchStarted=function fetchStarted(){return{type:FETCH_START};};export var fetchSuccess=function fetchSuccess(){return{type:FETCH_SUCCESS};};export var fetchError=function fetchError(payload){return{payload:payload,type:FETCH_ERROR};};export var loadProducts=function loadProducts(payload){return{payload:payload,type:LOAD_PRODUCTS};};/* thunk creators */export var loadProductsRequest=function loadProductsRequest(){return(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var cakes,cupcakes,products;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(fetchStarted());_context.prev=1;_context.next=4;return axios.get(\"\".concat(API_URL,\"/cakes\"));case 4:cakes=_context.sent;_context.next=7;return axios.get(\"\".concat(API_URL,\"/cupcakes\"));case 7:cupcakes=_context.sent;products={cakes:cakes.data,cupcakes:cupcakes.data};_context.next=11;return dispatch(loadProducts(products));case 11:_context.next=13;return dispatch(fetchSuccess());case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](1);dispatch(fetchError(_context.t0.message));case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,15]]);}));return function(_x){return _ref5.apply(this,arguments);};}());};/* reducer */export var reducer=function reducer(){var statePart=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};switch(action.type){case FETCH_START:{return _objectSpread({},statePart,{loading:{active:true,error:false}});}case FETCH_SUCCESS:{return _objectSpread({},statePart,{loading:{active:false,error:false},data:action.payload});}case FETCH_ERROR:{return _objectSpread({},statePart,{loading:{active:false,error:action.payload}});}case LOAD_PRODUCTS:{return _objectSpread({},statePart,{products:action.payload});}default:return statePart;}};","map":{"version":3,"sources":["/Users/wojtas/Desktop/Kodilla/final-project/client/src/redux/productsRedux.js"],"names":["axios","API_URL","getProductStats","products","loading","getCakes","cakes","getCupcakes","cupcakes","getOne","id","type","find","product","_id","reducerName","createActionName","name","FETCH_START","FETCH_SUCCESS","FETCH_ERROR","LOAD_PRODUCTS","fetchStarted","fetchSuccess","fetchError","payload","loadProducts","loadProductsRequest","dispatch","get","data","message","reducer","statePart","action","active","error"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { API_URL } from '../config';\n\n/* selectors */\nexport const getProductStats = ({products}) => products.loading;\nexport const getCakes = ({products}) => products.products.cakes;\nexport const getCupcakes = ({products}) => products.products.cupcakes;\nexport const getOne = ({products, id, type}) => {\n  if(type === 'cake'){\n    return products.cakes.find(product => product._id === id);\n  } else {\n    return products.cupcakes.find(product => product._id === id);\n  }\n};\n\n/* action name creator */\nconst reducerName = 'posts';\nconst createActionName = name => `app/${reducerName}/${name}`;\n\n/* action types */\nconst FETCH_START = createActionName('FETCH_START');\nconst FETCH_SUCCESS = createActionName('FETCH_SUCCESS');\nconst FETCH_ERROR = createActionName('FETCH_ERROR');\nconst LOAD_PRODUCTS = createActionName('LOAD_PRODUCTS');\n\n\n/* action creators */\nexport const fetchStarted = () => ({ type: FETCH_START });\nexport const fetchSuccess = () => ({ type: FETCH_SUCCESS });\nexport const fetchError = payload => ({ payload, type: FETCH_ERROR });\nexport const loadProducts = payload => ({ payload, type: LOAD_PRODUCTS });\n\n/* thunk creators */\nexport const loadProductsRequest = () => {\n  return async dispatch => {\n    dispatch(fetchStarted());\n    try {\n      let cakes = await axios.get(`${API_URL}/cakes`);\n      let cupcakes = await axios.get(`${API_URL}/cupcakes`);\n      const products = {\n        cakes: cakes.data,\n        cupcakes: cupcakes.data,\n      };\n      await dispatch(loadProducts(products));\n      await dispatch(fetchSuccess());\n    } catch(e) {\n      dispatch(fetchError(e.message));\n    }\n  };\n};\n\n/* reducer */\nexport const reducer = (statePart = [], action = {}) => {\n  switch (action.type) {\n    case FETCH_START: {\n      return {\n        ...statePart,\n        loading: {\n          active: true,\n          error: false,\n        },\n      };\n    }\n    case FETCH_SUCCESS: {\n      return {\n        ...statePart,\n        loading: {\n          active: false,\n          error: false,\n        },\n        data: action.payload,\n      };\n    }\n    case FETCH_ERROR: {\n      return {\n        ...statePart,\n        loading: {\n          active: false,\n          error: action.payload,\n        },\n      };\n    }\n    case LOAD_PRODUCTS: {\n      return {\n        ...statePart,\n        products: action.payload,\n      };\n    }\n    default:\n      return statePart;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}